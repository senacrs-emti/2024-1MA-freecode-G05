"use strict";(self.webpackChunksketchfab=self.webpackChunksketchfab||[]).push([[2322],{tjn4:(t,e,n)=>{n.d(e,{Z:()=>N});var r=n("mSEu"),i=n("k46e"),o=n("qqsP"),s=n("Cgfs"),u=n("jQDz"),a=n("R4My"),c=n.n(a),f=n("vCKz"),h=n("AsK1"),g=n("lrhy"),p=n("fAYH"),l=n("t3PY"),d=function(t,e){return Math.min(t,Math.max(0,parseInt(e)||0))},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,l.Qc)(t.split("?")[1]||"").page},P=function(){var t={};return{get:function(e){return t[e]},update:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.forEach((function(n){t[n.uid]=e}))}}};const y=function(t,e){var n=function(){var e=(0,p.Z)(t.lastPage)?t.lastPage:0,n=d(e,t.firstPage);return{lastPage:e,currentPageIndex:n,hasPrevious:0!==n}},r=P(),i=n(),o=function(t){return function(e){return r.update(t,e.results),i.currentPageIndex=t,e.previous||(i.hasPrevious=!1),e.next?i.lastPage=1/0:i.lastPage=t,e}};return{type:"offset",loadPrevious:function(t){var n=d(i.lastPage,i.currentPageIndex-1);return e(n,t).then(o(n))},loadNext:function(t){var n=d(i.lastPage,i.currentPageIndex+1);return e(n,t).then(o(n))},loadFirst:function(t){i=n(),r=P();return e(0,t).then(o(0))},reset:function(){i=n()},hasPrevious:function(){return i.hasPrevious},hasNext:function(){return i.currentPageIndex+1<i.lastPage},isFirst:function(){return 0===i.currentPageIndex},getQueryParamsForElementUid:function(t){return{page:r.get(t)||""}},getQueryParams:function(){return{page:i.currentPageIndex}},setInitialQuery:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=v(t);r.update(n,e.results)}}};var m=n("xKIK");function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){(0,m.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,l.Qc)(t.split("?")[1]||"").cursor},C=function(){var t={};return{get:function(e){return t[e]},update:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.forEach((function(n){t[n.uid]=e}))}}};const Z=function(t,e){var n=function(){return{previousCursor:t.previous||null,currentCursor:t.current,nextCursor:t.next||null}},r=C(),i=n(),o=function(t,e){return function(n){return r.update(t,n.results),i.currentCursor=t,e.setNext&&(i.nextCursor=n.next?O(n.next):null),e.setPrevious&&(i.previousCursor=n.previous?O(n.previous):null),n}};return{type:"cursor",loadPrevious:function(t){return e(i.previousCursor,t).then(o(i.previousCursor,b(b({},t),{},{setPrevious:!0})))},loadNext:function(t){return e(i.nextCursor,t).then(o(i.nextCursor,b(b({},t),{},{setNext:!0})))},loadFirst:function(t){return i=n(),r=C(),e(i.currentCursor,t).then(o(i.current,b(b({},t),{},{setNext:!0,setPrevious:!0})))},reset:function(){i=n()},hasPrevious:function(){return null!==i.previousCursor},hasNext:function(){return null!==i.nextCursor},isFirst:function(){return i.currentCursor===t.current},getQueryParamsForElementUid:function(t){return{cursor:r.get(t)}},getQueryParams:function(){return{cursor:i.currentCursor}},setInitialQuery:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=O(t);r.update(n,e.results)}}};var z=n("JBVY"),L=n("zIYZ"),k=n("g/7r");function I(t,e,n){var r=[],i=(0,s.Z)((function(){var t=r.slice();r=[],n.trigger(e,t)}),20),o=function(t){r.push(t),i()};return n.on(t,o),function(){n.off(t,o)}}var M=n("OM1T"),j=n("Oyie"),w=(0,f.Z)(["initialize"])(c().Collection);const N=w.extend({mixins:[M.Z],optionsTypes:{offset:M.M.number,pageSize:M.M.number,paginationType:M.M.oneOf(["cursor","offset"]),lastPage:M.M.number,firstPage:M.M.number,minOffset:M.M.number,maxOffset:M.M.number,cursor:M.M.shape({previous:M.M.string,next:M.M.string})},defaultOptions:function(){return{pageSize:r.Z.apiPageSize,paginationType:"cursor",offset:0,minOffset:0,maxOffset:1/0,cursor:{previous:null}}},backend:h.Z,previousPromise:j.resolve(),constructor:function(){this.options=(0,i.Z)({},this.defaultOptions(),(0,o.Z)(arguments[1]||{},(function(t){return void 0!==t}))),w.apply(this,arguments)},initialize:function(){this.options.backend&&(this.backend=this.options.backend),this._loading="none",I("add","afterAdd",this),I("remove","afterRemove",this),this.triggerAfterRequest=(0,s.Z)(this.triggerAfterRequest.bind(this),20),this.initializePagination(),w.prototype.initialize.apply(this,arguments)},at:function(t){return t<0?void 0:w.prototype.at.call(this,t)},domain:function(){return(0,u.Z)(this.backend,"domain")},parse:function(t){return this.backend.parse(t)},queryParams:function(){return this.isCursorPagination()?{cursor:this._currentCursor,count:(0,u.Z)(this.options,"pageSize")}:{offset:this.options.offset,count:(0,u.Z)(this.options,"pageSize")}},url:function(){var t=(0,u.Z)(this,"domain")+(0,u.Z)(this,"endpoint")+z.ZP.craft("?",this.queryParams());return t=t.replace(/(?!^)\/{2,}/g,"/")},fetch:function(){this.triggerBeforeRequest();var t=this.previousPromise;return this.previousPromise=j.resolve(w.prototype.fetch.apply(this,arguments)).then((function(e){return(0,g.Vs)(1e3,t).catch(k.EI).then((function(){return e}))})),this.previousPromise.then(function(t){return this.previousPromise=j.resolve(),this.triggerAfterRequest(t),t}.bind(this))},reset:function(){w.prototype.reset.apply(this,arguments),this.pagination.reset()},triggerBeforeRequest:function(){this.trigger("beforeRequest")},triggerAfterRequest:function(t){this.trigger("afterRequest",t)},isCursorPagination:function(){return"cursor"===this.pagination.type},initializePagination:function(){"offset"===this.options.paginationType?this._initializeOffsetPagination():this._initializeCursorPagination()},_initializeCursorPagination:function(){var t=this.options.cursor;this.pagination=Z(t,function(t,e){return this._currentCursor=t,j.resolve(this.fetch((0,i.Z)({},e,{reset:!1,add:!1,remove:!1})))}.bind(this))},_initializeOffsetPagination:function(){var t={lastPage:this.options.lastPage,firstPage:this.options.firstPage};this.pagination=y(t,function(t,e){return this.options.offset=this.options.minOffset+(0,u.Z)(this.options,"pageSize")*t,j.resolve(this.fetch((0,i.Z)({},e,{reset:!1,add:!1,remove:!1})))}.bind(this))},loadPreviousPage:function(t){var e=this;this.setLoading("previous");var n=t||{};return this.pagination.loadPrevious(n).then((function(t){var r=e.parse(t);return n.setPrevious&&n.setNext?e.set(r):e.add(r,{at:0}),e.setLoading("none"),r})).catch((function(t){throw e.setLoading("none"),t}))},loadNextPage:function(t){var e=this;this.setLoading("next");var n=t||{};return this.pagination.loadNext(n).then((function(t){var r=e.parse(t);return n.setPrevious&&n.setNext?e.set(r):e.add(r),e.setLoading("none"),r})).catch((function(t){throw e.setLoading("none"),t}))},loadFirstPage:function(t){var e=this;return this.setLoading("refresh"),this.pagination.loadFirst(t||{}).then((function(t){var n=e.parse(t);return n.length||e.trigger("empty"),e.set(n),e.setLoading("none"),n})).catch((function(t){throw e.setLoading("none"),t}))},loadLatestItems:function(){var t=this;return this.setLoading("refresh"),this.pagination.loadFirst({allowPrefetching:!1}).then((function(e){var n=t.parse(e);return t.add(n,{at:0}),t.setLoading("none"),n})).catch((function(e){throw t.setLoading("none"),e}))},hasPreviousPage:function(){return this.pagination.hasPrevious()},hasNextPage:function(){return this.pagination.hasNext()},setLoading:function(t){this._loading=t,this.trigger("loadingChanged",t)},loading:function(){return this._loading},isLoading:function(){return"none"!==this._loading}},{extend:function(t,e){var n=(0,i.Z)({},t,{defaultOptions:(0,L.Cn)((0,k.J$)(this.prototype.defaultOptions||{}),(0,k.J$)(t.defaultOptions||{})),optionTypes:(0,i.Z)({},this.prototype.optionTypes||{},t.optionTypes||{})});return w.extend.call(this,n,e)}})}}]);